<!-- 案例卡片组件 -->
{# 使用方式: include "components/case-card.html" #}
<!-- 需要传入变量: case -->
<article class="card-case" data-aos="fade-up">
  <!-- 封面图 -->
  <a href="/cases/{{ case.id }}" class="card-case-image">
    {% if case.cover_image %}
      <img
        src="{{ case.cover_image }}"
        alt="{{ case.client_name }}"
        loading="lazy"
      >
    {% else %}
      <div class="w-full h-full bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center">
        <svg class="w-16 h-16 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
        </svg>
      </div>
    {% endif %}
    <div class="card-case-overlay">
      <div>
        {% if case.category and case.category %}
          <span class="text-sm text-primary-300 mb-1 block">{{ case.category.name }}</span>
        {% endif %}
        <h3 class="card-case-title">{{ case.client_name }}</h3>
      </div>
    </div>
  </a>

  <!-- 内容 -->
  <div class="card-case-content">
    <!-- 客户信息 -->
    <div class="flex items-center gap-3 mb-3">
      {% if case.client_logo and case.client_logo %}
        <img src="{{ case.client_logo }}" alt="{{ case.client_name }}" class="w-10 h-10 rounded-lg object-contain bg-gray-50">
      {% endif %}
      <div>
        <p class="font-medium text-sm">{{ case.client_name }}</p>
        {% if case.category and case.category %}
          <p class="text-xs text-tertiary">{{ case.category.name }}</p>
        {% endif %}
      </div>
    </div>

    <!-- 简介 -->
    <p class="text-sm text-secondary mb-4 line-clamp-2">
      {{ case.summary |default:"" | truncate_text:100 }}
    </p>

    <!-- 相关产品 -->
    {% if case.related_projects and case.related_projects | length > 0 %}
      <div class="flex flex-wrap gap-1 mb-4">
        {% for project in case.related_projects | slice:":3" %}
          <span class="text-xs bg-primary-50 text-primary-700 px-2 py-0.5 rounded">
            {{ project.name }}
          </span>
        {% endfor %}
      </div>
    {% endif %}

    <!-- 查看详情 -->
    <a href="/cases/{{ case.id }}" class="btn-link text-sm">
      查看详情
    </a>
  </div>
</article>
